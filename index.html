<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LUNA - Project Price of Pain</title>
    <meta name="description" content="LUNA Development Studio - Creators of Price of Pain">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;900&display=swap" rel="stylesheet">
    
    <style>
        /* --- CORE STYLES --- */
        body {
            margin: 0;
            padding: 0;
            background-color: #050505;
            color: #ffffff;
            font-family: 'Inter', sans-serif;
            overflow: hidden; /* Důležité: Skryjeme nativní scrollbar, nahradíme ho virtuálním */
            width: 100vw;
            height: 100vh;
        }

        /* Virtuální kontejner pro Smooth Scroll */
        #smooth-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            perspective: 1000px; /* Hloubka 3D scény */
        }

        #smooth-content {
            width: 100%;
            /* Výška se nastaví dynamicky přes JS */
            will-change: transform;
            transform-style: preserve-3d;
        }

        /* --- TYPOGRAFIE A ELEMENTY --- */
        .text-gradient {
            background: linear-gradient(to right, #6366f1, #d946ef);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .hero-text-big {
            font-size: clamp(6rem, 25vw, 40rem);
            line-height: 0.8;
            letter-spacing: -0.05em;
            color: #ffffff;
            opacity: 1;
            transform-origin: center center;
        }

        /* Karty a boxy */
        .glass-panel {
            background: rgba(20, 20, 30, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .btn-glow {
            position: relative;
            background: linear-gradient(90deg, #4f46e5, #c026d3);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .btn-glow::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: 0.5s;
        }
        .btn-glow:hover::before {
            left: 100%;
        }
        .btn-glow:hover {
            box-shadow: 0 0 30px rgba(192, 38, 211, 0.5);
            transform: scale(1.02);
        }

        /* Scrollbar (Custom Visual) */
        .scrollbar-track {
            position: fixed;
            top: 0; right: 0;
            width: 6px;
            height: 100%;
            background: rgba(255,255,255,0.05);
            z-index: 9999;
        }
        .scrollbar-thumb {
            position: absolute;
            top: 0; right: 0;
            width: 6px;
            background: #d946ef;
            border-radius: 3px;
        }

        /* Helper classes pro animace */
        .origin-center { transform-origin: center; }
        .origin-left { transform-origin: left center; }
    </style>
</head>
<body>

    <div class="scrollbar-track"><div class="scrollbar-thumb" id="custom-scrollbar"></div></div>

    <div id="smooth-wrapper">
        <div id="smooth-content">

            <section class="relative h-[160vh] flex items-start justify-center overflow-hidden" id="section-hero">
                <div class="fixed-target sticky top-0 h-screen w-full flex items-center justify-center">
                    <h1 class="hero-text-big font-black uppercase text-center select-none" data-speed="0">
                        LUNA
                    </h1>
                </div>
            </section>

            <section class="relative py-32 px-6 overflow-hidden min-h-screen flex items-center" id="section-about">
                <div class="container mx-auto max-w-5xl relative z-10">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-16 items-center">
                        
                        <div class="anim-block" data-anim="fly-in-left">
                            <h2 class="text-6xl md:text-8xl font-bold leading-tight mb-8">
                                Beyond <br> <span class="text-gradient">Reality</span>
                            </h2>
                            <div class="h-1 w-0 bg-white mb-8" id="line-grow"></div>
                        </div>

                        <div class="anim-block space-y-8" data-anim="fly-in-right">
                            <p class="text-xl text-gray-400 leading-relaxed border-l-2 border-purple-500 pl-6">
                                We don't just write code. We forge worlds. LUNA is a development collective obsessed with the dark corners of creativity.
                            </p>
                            <p class="text-lg text-gray-500 leading-relaxed">
                                From the depths of Roblox engines to standalone web experiences, our mission is to create tension, immersion, and utility.
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="absolute top-1/2 right-[-10%] w-[50vw] h-[50vw] rounded-full bg-purple-900/10 blur-[120px] -z-10" data-speed="0.5"></div>
            </section>

            <section class="relative py-48 px-6 perspective-section" id="section-game">
                <div class="container mx-auto max-w-7xl">
                    
                    <div class="flex flex-col items-center mb-24 anim-block" data-anim="fade-up">
                        <span class="text-purple-500 tracking-[0.5em] text-sm uppercase font-bold mb-4">Featured Project</span>
                        <h2 class="text-5xl md:text-7xl font-black text-center">PRICE OF PAIN</h2>
                    </div>

                    <div class="relative w-full max-w-5xl mx-auto h-[600px] md:h-[700px] perspective-container">
                        
                        <div class="absolute inset-0 w-full h-full glass-panel rounded-3xl overflow-hidden border-gradient-anim transform-gpu" id="game-card">
                            
                            <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent z-20"></div>
                            
                            <div class="absolute inset-0 bg-gray-900 overflow-hidden">
                                <div class="w-full h-full bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-gray-800 via-black to-black opacity-80"></div>
                                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-[20rem] opacity-5 select-none font-black text-white">
                                    POP
                                </div>
                            </div>

                            <div class="absolute bottom-0 left-0 w-full p-8 md:p-16 z-30 flex flex-col md:flex-row items-end justify-between gap-8">
                                <div class="max-w-xl">
                                    <h3 class="text-3xl font-bold text-white mb-4">Psychological Horror</h3>
                                    <p class="text-gray-300 text-lg mb-6">
                                        Dive into a decaying world filled with hidden secrets. The truth twists as you descend deeper.
                                        <br><span class="text-purple-400 text-sm mt-2 block">Available in Browser</span>
                                    </p>
                                    <div class="flex gap-4">
                                        <a href="https://project-luna-off.vercel.app/countdown.html" target="_blank" class="btn-glow px-8 py-4 rounded-lg font-bold text-white text-lg tracking-wide uppercase">
                                            Enter the Nightmare
                                        </a>
                                    </div>
                                </div>
                                
                                <div class="hidden md:block text-right space-y-2">
                                    <div class="text-xs text-gray-500 uppercase tracking-widest">Status</div>
                                    <div class="text-xl font-mono text-green-400">LIVE</div>
                                    <div class="text-xs text-gray-500 uppercase tracking-widest mt-4">Version</div>
                                    <div class="text-xl font-mono">1.0.4</div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </section>

            <section class="relative py-40 px-6 overflow-hidden bg-black" id="section-partners">
                <div class="container mx-auto text-center relative z-10">
                    <h2 class="text-4xl font-bold mb-32 anim-block" data-anim="scale-up">Our Allies</h2>

                    <div class="flex flex-col md:flex-row justify-center items-center gap-24 md:gap-48 relative">
                        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-3/4 h-[1px] bg-gradient-to-r from-transparent via-purple-900 to-transparent hidden md:block"></div>

                        <div class="partner-item relative group" data-speed="0.1">
                            <div class="absolute -inset-4 bg-purple-600/20 rounded-full blur-xl opacity-0 group-hover:opacity-100 transition duration-500"></div>
                            <img src="https://github.com/Imagineoff/Imagineweb/raw/main/NeP.PNG" class="h-32 md:h-40 w-auto object-contain relative z-10 drop-shadow-2xl transform transition duration-500 group-hover:scale-110" alt="Partner">
                        </div>

                        <div class="partner-item relative group" data-speed="-0.1">
                            <div class="absolute -inset-4 bg-blue-600/20 rounded-full blur-xl opacity-0 group-hover:opacity-100 transition duration-500"></div>
                            <img src="https://github.com/Imagineoff/Imagineweb/raw/main/KladneskeDilny.WEBP" class="h-32 md:h-40 w-auto object-contain relative z-10 drop-shadow-2xl transform transition duration-500 group-hover:scale-110" alt="Partner">
                        </div>
                    </div>
                </div>
            </section>

            <section class="relative py-32 px-6" id="section-connect">
                <div class="container mx-auto max-w-6xl">
                    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                        
                        <div class="lg:col-span-4 space-y-4 anim-block" data-anim="fly-in-left-hard">
                            <div class="p-8 glass-panel rounded-2xl">
                                <h3 class="text-2xl font-bold mb-6">Connect</h3>
                                <div class="flex flex-col gap-4">
                                    <a href="https://www.patreon.com/Silent_Studio" target="_blank" class="flex items-center justify-between p-4 bg-white/5 rounded-lg hover:bg-white/10 transition border border-transparent hover:border-purple-500/50">
                                        <span>Patreon</span> ↗
                                    </a>
                                    <a href="https://x.com/project_luna_" target="_blank" class="flex items-center justify-between p-4 bg-white/5 rounded-lg hover:bg-white/10 transition border border-transparent hover:border-purple-500/50">
                                        <span>X (Twitter)</span> ↗
                                    </a>
                                    <a href="https://m.youtube.com/@studioluna_ofc" target="_blank" class="flex items-center justify-between p-4 bg-white/5 rounded-lg hover:bg-white/10 transition border border-transparent hover:border-purple-500/50">
                                        <span>YouTube</span> ↗
                                    </a>
                                    <a href="mailto:assist.luna@proton.me" class="mt-4 block text-sm text-gray-400 hover:text-white transition">
                                        assist.luna@proton.me
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="lg:col-span-8 anim-block" data-anim="fly-in-right-hard">
                            <iframe src="https://discord.com/widget?id=1433738890421997600&theme=dark" width="100%" height="500" allowtransparency="true" frameborder="0" class="rounded-2xl shadow-2xl w-full" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe>
                        </div>

                    </div>
                </div>
            </section>

            <section class="py-24 px-6 flex justify-center perspective-section">
                <div class="container max-w-5xl anim-block" data-anim="rotate-up">
                    <div class="relative group cursor-pointer w-full">
                        <div class="absolute -inset-2 bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 rounded-3xl blur-xl opacity-40 group-hover:opacity-80 transition duration-700"></div>
                        
                        <img src="https://i.imgur.com/hLCDPcl.jpeg" alt="Advertisement" class="relative block w-full rounded-2xl shadow-2xl transform transition-transform duration-700 group-hover:scale-[1.02] group-hover:-translate-y-2">
                        
                        <div class="absolute top-4 right-4 bg-black/60 backdrop-blur-md px-3 py-1 rounded text-xs font-mono uppercase border border-white/20">Sponsored</div>
                    </div>
                </div>
            </section>

            <footer class="py-12 text-center border-t border-gray-900 bg-black">
                <p class="text-gray-600">&copy; <span id="year"></span> LUNA Development.</p>
            </footer>
        </div>
    </div>

    <script>
        // --- 1. SETUP & UTILITIES ---
        const body = document.body;
        const main = document.getElementById('smooth-content');
        const scrollbarThumb = document.getElementById('custom-scrollbar');
        document.getElementById('year').textContent = new Date().getFullYear();

        // Stavy aplikace
        let state = {
            current: 0,   // Kde se vizuálně nacházíme
            target: 0,    // Kde bychom měli být (podle scrollbaru)
            ease: 0.075,  // "Váha" scrollování (menší = těžší/pomalejší dojezd)
            height: 0     // Výška obsahu
        };

        // Lineární interpolace (Lerp) - tohle dělá ten "smooth" efekt
        const lerp = (start, end, t) => start * (1 - t) + end * t;
        
        // Změna velikosti okna
        function onResize() {
            state.height = main.getBoundingClientRect().height;
            body.style.height = `${state.height}px`; // Roztáhneme body, aby měl prohlížeč co scrollovat
        }
        window.addEventListener('resize', onResize);
        
        // Inicializace velikosti po načtení obrázků
        window.addEventListener('load', () => {
            onResize();
            // Trigger pro první frame
            update();
        });

        // --- 2. SCROLL LOOP (THE ENGINE) ---
        function update() {
            // Získání cílové pozice z nativního scrollu
            state.target = window.scrollY;
            
            // Vypočítáme "dojezd" (smooth movement)
            state.current = lerp(state.current, state.target, state.ease);
            
            // Zaokrouhlení pro výkon (aby nepočítal setiny pixelů donekonečna)
            if (Math.abs(state.target - state.current) < 0.1) {
                state.current = state.target;
            }

            // A. POSUN HLAVNÍHO OBSAHU
            // Používáme translate3d pro hardwarovou akceleraci
            main.style.transform = `translate3d(0, -${state.current}px, 0)`;

            // B. POSUN VLASTNÍHO SCROLLBARU
            const scrollRatio = window.innerHeight / state.height;
            const thumbHeight = Math.max(window.innerHeight * scrollRatio, 50); // Min výška 50px
            scrollbarThumb.style.height = `${thumbHeight}px`;
            
            // Výpočet pozice "palce" scrollbaru
            const scrollPercent = state.current / (state.height - window.innerHeight);
            const scrollbarTop = scrollPercent * (window.innerHeight - thumbHeight);
            if(!isNaN(scrollbarTop)) {
                scrollbarThumb.style.transform = `translate3d(0, ${scrollbarTop}px, 0)`;
            }

            // --- 3. ANIMATION LOGIC (SCRUBBING) ---
            // Tady se děje magie. Spouštíme animace podle pozice `state.current`
            animateElements(state.current);

            // Zavolání dalšího framu
            requestAnimationFrame(update);
        }

        // --- 4. DEFINICE ANIMACÍ ---
        const lunaText = document.querySelector('.hero-text-big');
        const heroSection = document.getElementById('section-hero');
        const gameCard = document.getElementById('game-card');
        const partners = document.querySelectorAll('.partner-item');
        const animBlocks = document.querySelectorAll('.anim-block');
        const lineGrow = document.getElementById('line-grow');

        function animateElements(scrollY) {
            
            // A. LUNA HERO ZOOM (Scrubbing)
            // Efekt: Text se zvětšuje s tím, jak scrollujeme dolů
            if (scrollY < window.innerHeight * 1.5) {
                const progress = Math.min(1, scrollY / (window.innerHeight)); // 0 až 1
                
                // Scale from 1 to 50 (obrovský zoom skrz)
                const scale = 1 + (progress * 40); 
                const opacity = 1 - (progress * 1.2); // Rychlejší zmizení

                lunaText.style.transform = `scale(${scale})`;
                lunaText.style.opacity = Math.max(0, opacity);
                
                // Skrytí když je moc velký pro lepší výkon
                lunaText.style.visibility = opacity <= 0 ? 'hidden' : 'visible';
            }

            // B. PRICE OF PAIN CARD (3D Rotation)
            // Karta se otáčí podle toho, kde je na obrazovce
            const cardRect = gameCard.parentElement.getBoundingClientRect();
            // Upravíme rect o virtuální scroll (protože getBoundingClientRect lže při transformu rodiče)
            const cardTopAbsolute = cardRect.top + state.current; // Absolutní pozice prvku na stránce
            
            // Zjistíme, kde je karta relativně vůči viewportu (-1 = nahoře pryč, 0 = střed, 1 = dole pod)
            const cardViewportPos = (cardTopAbsolute - scrollY - (window.innerHeight/2)) / (window.innerHeight/2);
            
            if (cardViewportPos > -2 && cardViewportPos < 2) {
                // Rotace na ose X (náklon dopředu/dozadu)
                const rotateX = cardViewportPos * 25; // Max 25 stupňů
                // Jemný posun na ose Y pro paralaxu
                const translateY = cardViewportPos * -50; 
                
                gameCard.style.transform = `
                    rotateX(${-rotateX}deg) 
                    translateY(${translateY}px) 
                    scale(${1 - Math.abs(cardViewportPos * 0.05)})
                `;
            }

            // C. PARTNERS (Parallax Float)
            partners.forEach(p => {
                const speed = parseFloat(p.getAttribute('data-speed'));
                // Posuneme prvek relativně k aktuálnímu scrollu
                const offset = scrollY * speed;
                p.style.transform = `translate3d(0, ${offset}px, 0)`;
            });

            // D. GENERAL ANIM BLOCKS (Prvky co přilétají)
            // Tady řešíme animace typu: přiletí zleva, zprava, atd.
            animBlocks.forEach(block => {
                // Pozice prvku
                // Protože parent je transformovaný, musíme vypočítat pozici trochu složitěji,
                // ale pro zjednodušení použijeme nativní offsetTop, který je v statickém layoutu konstantní.
                // Pro přesnost ve virtuálním scrollu musíme najít offsetTop rekurzivně.
                let el = block;
                let offsetTop = 0;
                while(el && el !== main) {
                    offsetTop += el.offsetTop;
                    el = el.offsetParent;
                }

                const triggerPoint = window.innerHeight * 0.85; // Animace začne, když je prvek v 85% výšky okna
                const distFromTop = offsetTop - scrollY; // Vzdálenost od vršku okna

                // Progres animace (0 = neviditelné/dole, 1 = na místě)
                let progress = 1 - (distFromTop / triggerPoint);
                progress = Math.min(Math.max(progress, 0), 1); // Clamp mezi 0 a 1

                // Aplikace efektů podle typu
                const type = block.getAttribute('data-anim');
                
                // Aby to fungovalo oboustranně (reverzibilně), mapujeme progress přímo na transform
                if (type === 'fly-in-left') {
                    // Start: x = -100px, opacity = 0
                    // End: x = 0, opacity = 1
                    const x = -150 * (1 - progress);
                    block.style.opacity = progress;
                    block.style.transform = `translate3d(${x}px, 0, 0)`;
                } 
                else if (type === 'fly-in-right') {
                    const x = 150 * (1 - progress);
                    block.style.opacity = progress;
                    block.style.transform = `translate3d(${x}px, 0, 0)`;
                }
                else if (type === 'fly-in-left-hard') {
                     // Rychlejší a delší přílet
                     const x = -300 * (1 - progress);
                     block.style.opacity = progress;
                     block.style.transform = `translate3d(${x}px, 0, 0)`;
                }
                else if (type === 'fly-in-right-hard') {
                     const x = 300 * (1 - progress);
                     block.style.opacity = progress;
                     block.style.transform = `translate3d(${x}px, 0, 0)`;
                }
                else if (type === 'fade-up') {
                    const y = 100 * (1 - progress);
                    block.style.opacity = progress;
                    block.style.transform = `translate3d(0, ${y}px, 0)`;
                }
                else if (type === 'scale-up') {
                    const s = 0.5 + (0.5 * progress); // 0.5 -> 1.0
                    block.style.opacity = progress;
                    block.style.transform = `scale(${s})`;
                }
                else if (type === 'rotate-up') {
                    const y = 100 * (1 - progress);
                    const r = 20 * (1 - progress);
                    block.style.opacity = progress;
                    block.style.transform = `translate3d(0, ${y}px, 0) rotateX(${r}deg)`;
                }
            });

            // E. SPECIAL: Line Grow
            if (lineGrow) {
                let el = lineGrow;
                let offsetTop = 0;
                while(el && el !== main) { offsetTop += el.offsetTop; el = el.offsetParent; }
                const dist = offsetTop - scrollY;
                let prog = 1 - (dist / (window.innerHeight * 0.8));
                prog = Math.min(Math.max(prog, 0), 1);
                lineGrow.style.width = `${prog * 100}px`; // Roztáhne čáru na 100px
            }
        }

        // Spustit smyčku
        update();

    </script>
</body>
</html>
