<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/Imagineoff/luna/main/Poplogo.png">
    <title>LUNA</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background: #000;
            font-family: 'Courier New', Courier, monospace;
            overflow: hidden;
            user-select: none;
            cursor: none;
            transition: filter 0.5s ease;
        }

        body.glitch-colors {
            filter: grayscale(1) contrast(1.2);
        }

        #intro-layer {
            position: fixed;
            inset: 0;
            display:flex;
            justify-content:center;
            align-items:center;
            background:#000;
            z-index:2000;
            transition:opacity .8s ease;
            cursor:default;
        }
        #enter-btn {
            border:1px solid #fff;
            background:transparent;
            color:#fff;
            padding:14px 36px;
            font-size:1.4rem;
            text-transform:uppercase;
            letter-spacing:4px;
            cursor:pointer;
        }
        #enter-btn:hover { background:#fff; color:#000; }

        #content-layer {
            position:fixed;
            inset:0;
            display:flex;
            justify-content:center;
            align-items:center;
            z-index:1;
            opacity:0;
            transition:opacity .8s ease;
        }

        #center-wrap {
            display:flex;
            flex-direction:column;
            gap:18px;
            align-items:center;
            pointer-events:auto;
            z-index:2;
        }

        #timer { color:#fff; font-size:4.2rem; letter-spacing:4px; }

        #play-btn {
            border: 2px solid rgba(255,255,255,0.85);
            background: rgba(255,255,255,0.02);
            color: #fff;
            padding: 12px 28px;
            font-size: 1.1rem;
            text-transform:uppercase;
            letter-spacing:3px;
            cursor: pointer;
            transition: transform .12s ease, background .18s ease, color .18s ease;
            backdrop-filter: blur(4px);
        }
        #play-btn:hover {
            transform: translateY(-3px);
            background: rgba(255,255,255,0.95);
            color: #000;
        }

        #enter-btn, #play-btn { cursor: pointer; }

        #spotlight-overlay {
            position:fixed;
            inset:0;
            pointer-events:none;
            z-index:10;
            opacity:0;
            transition:opacity .8s ease;
            background:
              radial-gradient(
                circle var(--r, 300px) at var(--x, 50%) var(--y, 50%),
                rgba(255,255,255,0) 0%,
                rgba(0,0,0,0.92) 38%,
                black 100%
              );
            will-change: background;
        }

        #ghost-figure {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: auto;
            height: 80vh;
            opacity: 0;
            z-index: 5;
            pointer-events: none;
            transition: opacity 2s ease;
        }

        @media (max-width:768px){
            #timer { font-size:2.2rem; }
            #play-btn { padding: 10px 20px; font-size:1rem; }
            #enter-btn { padding: 10px 24px; font-size:1.1rem; }
        }
    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="https://files.catbox.moe/95ya6n.mp3" type="audio/mp3">
    </audio>

    <img id="ghost-figure" src="https://raw.githubusercontent.com/Imagineoff/luna/main/Background%20.PNG" alt="">

    <div id="intro-layer">
        <button id="enter-btn">ENTER</button>
    </div>

    <div id="spotlight-overlay"></div>

    <div id="content-layer">
        <div id="center-wrap" aria-live="polite">
            <div id="timer">Loading...</div>
            <button id="play-btn" aria-label="Play a game">VIEW THE GAME</button>
        </div>
    </div>

    <script>
    const targetDateString = "2026-03-07T15:00:00";

    const SETTINGS = {
        baseSpeed: 180,
        minTargetTime: 800,
        maxTargetTime: 2600,
        reachThreshold: 40,
        radiusMin: 200,
        radiusMax: 420,
        jitter: 14,
        changeRadiusEvery: 1200
    };

    const introLayer = document.getElementById('intro-layer');
    const enterBtn = document.getElementById('enter-btn');
    const audio = document.getElementById('bg-music');
    const contentLayer = document.getElementById('content-layer');
    const spotlightOverlay = document.getElementById('spotlight-overlay');
    const timerElement = document.getElementById('timer');
    const playBtn = document.getElementById('play-btn');
    const ghost = document.getElementById('ghost-figure');

    function updateCountdown(){
        const now = Date.now();
        const target = new Date(targetDateString).getTime();
        const d = target - now;
        if (d <= 0) {
            timerElement.textContent = "00d 00h 00m 00s";
            return;
        }
        const days = Math.floor(d / (1000*60*60*24));
        const hours = Math.floor((d % (1000*60*60*24)) / (1000*60*60));
        const minutes = Math.floor((d % (1000*60*60)) / (1000*60));
        const seconds = Math.floor((d % (1000*60)) / 1000);
        const pad = n => (n<10 ? "0"+n : n);
        timerElement.textContent = `${pad(days)}d ${pad(hours)}h ${pad(minutes)}m ${pad(seconds)}s`;
    }
    setInterval(updateCountdown, 1000);
    updateCountdown();

    enterBtn.addEventListener('click', () => {
        audio.volume = 0.5;
        audio.play().catch(()=>{});

        introLayer.style.opacity = '0';
        setTimeout(()=>{
            introLayer.style.display = 'none';
            contentLayer.style.opacity = '1';
            spotlightOverlay.style.opacity = '1';
            startSpotlight();
            triggerEasterEggs();
        }, 700);
    });

    playBtn.addEventListener('click', () => {
        window.location.href = 'https://studio-luna.itch.io/priceofpain';
    });

    function triggerEasterEggs() {
        const scheduleNext = () => {
            const delay = Math.floor(Math.random() * (60000 - 30000 + 1) + 30000);
            setTimeout(() => {
                const choice = Math.random();
                if (choice < 0.5) {
                    document.body.classList.add('glitch-colors');
                    setTimeout(() => document.body.classList.remove('glitch-colors'), Math.random() * 3000 + 1000);
                } else {
                    ghost.style.opacity = "0.4";
                    setTimeout(() => ghost.style.opacity = "0", Math.random() * 4000 + 2000);
                }
                scheduleNext();
            }, delay);
        };
        scheduleNext();
    }

    let vw = window.innerWidth;
    let vh = window.innerHeight;
    let pos = { x: vw/2, y: vh/2 };
    let target = { x: Math.random() * vw, y: Math.random() * vh };
    let currentSpeed = SETTINGS.baseSpeed;
    let lastTime = performance.now();
    let radius = (SETTINGS.radiusMin + SETTINGS.radiusMax) / 2;
    let lastRadiusChange = performance.now();
    let nextTargetTimeout = 1000;
    let targetTimer = 0;

    function startSpotlight(){
        spotlightOverlay.style.setProperty('--x', pos.x + 'px');
        spotlightOverlay.style.setProperty('--y', pos.y + 'px');
        spotlightOverlay.style.setProperty('--r', radius + 'px');
        requestAnimationFrame(loop);
    }

    function loop(t){
        const dt = Math.min(40, t - lastTime) / 1000;
        lastTime = t;

        const dx = target.x - pos.x;
        const dy = target.y - pos.y;
        const dist = Math.hypot(dx, dy);

        targetTimer += dt*1000;
        if (dist < SETTINGS.reachThreshold || targetTimer > nextTargetTimeout) {
            target = { x: Math.random() * vw, y: Math.random() * vh };
            currentSpeed = SETTINGS.baseSpeed * (0.5 + Math.random()*1.2);
            nextTargetTimeout = Math.floor(SETTINGS.minTargetTime + Math.random()*(SETTINGS.maxTargetTime-SETTINGS.minTargetTime));
            targetTimer = 0;
        }

        if (dist > 1) {
            pos.x += (dx / dist) * currentSpeed * dt + (Math.random() - 0.5) * SETTINGS.jitter * dt;
            pos.y += (dy / dist) * currentSpeed * dt + (Math.random() - 0.5) * SETTINGS.jitter * dt;
        }

        pos.x = Math.max(0, Math.min(vw, pos.x));
        pos.y = Math.max(0, Math.min(vh, pos.y));

        if (t - lastRadiusChange > SETTINGS.changeRadiusEvery) {
            lastRadiusChange = t;
            const newR = SETTINGS.radiusMin + Math.random() * (SETTINGS.radiusMax - SETTINGS.radiusMin);
            const startR = radius;
            const startTime = t;
            const dur = 450;
            const animate = (now) => {
                const p = Math.min(1, (now - startTime) / dur);
                const eased = p < 0.5 ? 2*p*p : -1 + (4 - 2*p)*p;
                radius = startR + (newR - startR) * eased;
                if (p < 1) requestAnimationFrame(animate);
            };
            requestAnimationFrame(animate);
        }

        spotlightOverlay.style.setProperty('--x', pos.x + 'px');
        spotlightOverlay.style.setProperty('--y', pos.y + 'px');
        spotlightOverlay.style.setProperty('--r', Math.round(radius) + 'px');

        requestAnimationFrame(loop);
    }

    window.addEventListener('resize', () => {
        vw = window.innerWidth;
        vh = window.innerHeight;
    });
    </script>
</body>
</html>
